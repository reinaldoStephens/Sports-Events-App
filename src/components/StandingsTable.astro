---
import type { StandingRow } from '../lib/standings';

interface Props {
  standings: StandingRow[];
}

const { standings } = Astro.props;
---

<div class="overflow-x-auto rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-100 bg-white">
  <table class="w-full text-sm text-center">
    <thead>
      <tr class="bg-slate-50 text-slate-400 font-bold uppercase tracking-wider text-[10px] border-b border-slate-100">
        <th class="px-6 py-4 text-left w-1/3">Equipo</th>
        <th class="px-4 py-4" title="Partidos Jugados">PJ</th>
        <th class="px-4 py-4" title="Victorias">G</th>
        <th class="px-4 py-4" title="Empates">E</th>
        <th class="px-4 py-4" title="Derrotas">P</th>
        <th class="px-4 py-4 hidden sm:table-cell" title="Goles a Favor">GF</th>
        <th class="px-4 py-4 hidden sm:table-cell" title="Goles en Contra">GC</th>
        <th class="px-4 py-4" title="Diferencia de Goles">DG</th>
        <th class="px-6 py-4 text-blue-600 font-black">PTS</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-slate-50">
      {standings.map((row, index) => (
        <tr class="hover:bg-blue-50/30 transition-colors group">
          <td class="px-6 py-4 text-left whitespace-nowrap flex items-center gap-3">
            <span class={`font-black w-6 text-right ${index < 3 ? 'text-blue-500' : 'text-slate-300'}`}>{index + 1}.</span>
            {row.equipo.logo_url || row.equipo.escudo_url ? (
              <img 
                src={row.equipo.logo_url || row.equipo.escudo_url || ''} 
                alt={row.equipo.nombre} 
                class="w-8 h-8 object-contain rounded-full bg-slate-100 p-1"
              />
            ) : (
                <div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-black text-slate-400">
                    {row.equipo.nombre.substring(0, 2).toUpperCase()}
                </div>
            )}
            <span class="font-bold text-slate-700 group-hover:text-blue-600 transition-colors">{row.equipo.nombre}</span>
          </td>
          <td class="px-4 py-4 font-medium text-slate-500">{row.pj}</td>
          <td class="px-4 py-4 font-medium text-emerald-500">{row.g}</td>
          <td class="px-4 py-4 font-medium text-amber-500">{row.e}</td>
          <td class="px-4 py-4 font-medium text-rose-500">{row.p}</td>
          <td class="px-4 py-4 font-medium text-slate-400 hidden sm:table-cell">{row.pf}</td>
          <td class="px-4 py-4 font-medium text-slate-400 hidden sm:table-cell">{row.pc}</td>
          <td class="px-4 py-4 font-bold text-slate-600">{row.dp > 0 ? `+${row.dp}` : row.dp}</td>
          <td class="px-6 py-4 font-black text-lg text-slate-800">{row.pts}</td>
        </tr>
      ))}
      {standings.length === 0 && (
          <tr>
              <td colspan="9" class="py-10 text-center text-slate-400">No hay datos disponibles a√∫n.</td>
          </tr>
      )}
    </tbody>
  </table>
</div>
